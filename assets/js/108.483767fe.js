(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{599:function(t,s,e){"use strict";e.r(s);var a=e(44),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"vue-3-x"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-3-x"}},[t._v("#")]),t._v(" vue@3.x")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("vue@2.x 和 vue@3.x区别")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("vue@3.x")]),t._v(" 源码采用 "),e("code",[t._v("monorepo")]),t._v(" 方式进行管理，将模块拆分到 "),e("code",[t._v("package")]),t._v(" 目录中")]),t._v(" "),e("li",[e("code",[t._v("vue@3.x")]),t._v(" 采用 "),e("code",[t._v("ts")]),t._v("开发，增强类型检测；vue@2.x采用 "),e("code",[t._v("flow")])]),t._v(" "),e("li",[e("code",[t._v("vue@3.x")]),t._v(" 性能优化，支持 "),e("code",[t._v("tree-shaking")])]),t._v(" "),e("li",[e("code",[t._v("vue@2.x")]),t._v(" 后期引入"),e("code",[t._v("RFC")]),t._v("，使每个版本改动可控 rfcs")]),t._v(" "),e("li",[e("code",[t._v("vue@3.x")]),t._v(" 数据劫持采用 "),e("code",[t._v("proxy")]),t._v("；"),e("code",[t._v("vue@2.x")]),t._v(" 数据劫持采用 "),e("code",[t._v("defineProperty")])]),t._v(" "),e("li",[e("code",[t._v("vue@3.x")]),t._v(" 中对模板编译进行了优化，编译时生成 "),e("strong",[t._v("Block tree")]),t._v("，可以对子节点的动态节点进行收集，可以减少比较，并且采用了 "),e("code",[t._v("patchFlag")]),t._v(" 标记动态节点")]),t._v(" "),e("li",[e("code",[t._v("vue@3.x")]),t._v(" 采用 "),e("code",[t._v("compositionApi")]),t._v("进行组织功能，解决反复横跳，优化复用逻辑（mixin带来的数据来源不清晰、命名冲突等），相比 "),e("code",[t._v("optionsApi")]),t._v(" 类型推断更加方便")]),t._v(" "),e("li",[e("code",[t._v("vue@3.x")]),t._v(" 增加了 "),e("code",[t._v("Fragment")]),t._v("、"),e("code",[t._v("Teleport")]),t._v("、"),e("code",[t._v("Suspense")]),t._v("组件")])])]),t._v(" "),e("h2",{attrs:{id:"一、vue-3-x架构分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、vue-3-x架构分析"}},[t._v("#")]),t._v(" 一、vue@3.x架构分析")]),t._v(" "),e("h3",{attrs:{id:"_1-monorepo介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-monorepo介绍"}},[t._v("#")]),t._v(" 1. Monorepo介绍")]),t._v(" "),e("p",[e("code",[t._v("Monorepo")]),t._v(" 是"),e("strong",[t._v("管理项目代码的一个方式")]),t._v("，指：在一个项目仓库中管理多个模块/包(package)")]),t._v(" "),e("p",[e("strong",[t._v("优化：")])]),t._v(" "),e("ul",[e("li",[t._v("一个仓库可维护多个模块，不用到处找仓库")]),t._v(" "),e("li",[t._v("方便版本管理和依赖管理，模块之间的引用，调用都非常方便")])]),t._v(" "),e("p",[e("strong",[t._v("缺点：")])]),t._v(" "),e("ul",[e("li",[t._v("仓库体积会变大")])]),t._v(" "),e("h3",{attrs:{id:"_2-vue-3-x-项目结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue-3-x-项目结构"}},[t._v("#")]),t._v(" 2. vue@3.x 项目结构")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├── packages/                "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# packages")]),t._v("\n│   ├── compiler-core        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 与平台无关的编译核心")]),t._v("\n│   ├── compiler-dom         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 针对浏览器的编译模块")]),t._v("\n│   ├── compiler-sfc         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 针对单文件解析")]),t._v("\n│   ├── compiler-ssr         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 针对服务器端渲染的模块")]),t._v("\n│   ├── reactivity           "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 响应式系统")]),t._v("\n│   ├── runtime-core         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 与平台无关的运行时核心（可以创建针对特定平台的运行时 - 自定义渲染器）")]),t._v("\n│   ├── runtime-dom          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 针对浏览器的运行时，包括 DOM API、属性、事件处理等")]),t._v("\n│   ├── runtime-test         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于测试")]),t._v("\n│   ├── server-renderer      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于服务器端渲染")]),t._v("\n│   ├── sfc-playground\n│   ├── shared               "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 多个包之间共享的内容")]),t._v("\n│   ├── size-check           "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用来测试代码体积")]),t._v("\n│   ├── template-explorer    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于调试编译器输出的开发工具")]),t._v("\n│   ├── vue                  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 完整版本，包括运行时和编译器")]),t._v("\n│   └── vue-compat \n├── scripts\n│   ├── \n│   └── \n├── package.json\n└── "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),e("h3",{attrs:{id:"_3-安装依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装依赖"}},[t._v("#")]),t._v(" 3. 安装依赖")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("依赖")]),t._v(" "),e("th",[t._v("功能描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("typescript")]),t._v(" "),e("td",[t._v("支持typescript")])]),t._v(" "),e("tr",[e("td",[t._v("rollup")]),t._v(" "),e("td",[t._v("打包工具")])]),t._v(" "),e("tr",[e("td",[t._v("rollup-plugin-typescript2")]),t._v(" "),e("td",[t._v("rollup和ts的桥梁")])]),t._v(" "),e("tr",[e("td",[t._v("@rollup/plugin-node-resolve")]),t._v(" "),e("td",[t._v("解析node第三方模块")])]),t._v(" "),e("tr",[e("td",[t._v("@rollup/plugin-json")]),t._v(" "),e("td",[t._v("支持引入json")])]),t._v(" "),e("tr",[e("td",[t._v("execa")]),t._v(" "),e("td",[t._v("开启子进程，方便执行命令")])])])]),t._v(" "),e("h4",{attrs:{id:"package-json"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" package.json")]),t._v(" "),e("div",{staticClass:"vueschool"},[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1KB4y1g7jb?p=3",target:"_blank",rel:"sponsored noopener",title:"根据需要打包的信息进行打包"}},[t._v("珠峰架构Vue3.0课程（第一期） - 根据需要打包的信息进行打包")])]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"private"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.1.3"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"workspaces"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"packages/*"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test-dts/index.d.ts"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tsd"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"directory"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test-dts"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gitHooks"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint-staged"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit-msg"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/verifyCommit.js"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"*.js"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --write"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"*.ts?(x)"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --parser=typescript --write"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"engines"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"node"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('">=10.0.0"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"视频教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视频教程"}},[t._v("#")]),t._v(" 视频教程")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1KB4y1g7jb",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第一期）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1Sf4y1h7A1",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第二期）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1xh411a7ux",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第三期）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1N5411u7YU",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第四期）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1664y1r7Qx",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第五期）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1t44y1B7K8",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第六期）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.bilibili.com/video/BV1Bo4y1k77S",target:"_blank",rel:"noopener noreferrer"}},[t._v("珠峰架构Vue3.0课程（第七期）"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);